<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beneath the Surface</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">   
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300..700;1,300..700&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
</head>
<body>
    <h1 class="title">
        <span class="beneath">Beneath</span>
        <span class="surface"> the Surface</span>
    </h1>
    <p class="subtext">Mapping Invertebrate Diversity in the Smithsonian Collection</p>

    <div class="image-container">
        <div class="image-wrapper">
            <div class="animated-square" id="animated-square-1"></div>
            <span class="image-label" id="label-1">SPOON WORM</span>
            <div class="tooltip-container">
                <img src="images/hover.png" class="hover-image" alt="Hover Image">
                <span class="tooltip">
                    <p>This is where most marine life thrives due to abundant sunlight for photosynthesis.</p>
                </span>           
            </div>
            <img id="main-image" src="images/01.jpg" alt="Image 01">
            <img id="image-b" src="images/01-b.jpg" alt="Image 01-b" style="display:none;">
            <img id="image-c" src="images/01-c.jpg" alt="Image 01-c" style="display:none;">

            <div class="rectangle-container"> <!-- New container for positioning -->
            </div>
             <p class="image-text">
                <span class="zone-name">Epipelagic Zone</span><br>
                <span class="zone-depth">(Sunlight Zone: 0 - 200 meters)</span>
            </p>
        </div>
        
        <script>
            const images = [
                document.getElementById('main-image'),
                document.getElementById('image-b'),
                document.getElementById('image-c')
            ];
            const imageLabels = ["SPOON WORM", "BOBTAIL SQUID", "GASTROPODA"];
            let currentIndex = 0;
    
            function changeImage() {
                // Hide the current image
                images[currentIndex].style.display = 'none';
    
                // Update index
                currentIndex = (currentIndex + 1) % images.length;
    
                // Show the next image
                images[currentIndex].style.display = 'block';
                
                // Update the label text
                document.getElementById('label-1').textContent = imageLabels[currentIndex];
            }
    
            // Start the image changing every 3 seconds
            setInterval(changeImage, 4000);
        </script>
         
        <div class="image-wrapper">
            <div class="animated-square" id="animated-square-2"></div>
            <span class="image-label" id="label-2">IRIDESCENT ANTARTIC SNAIL</span>
            <div class="tooltip-container">
                <img src="images/hover.png" class="hover-image" alt="Hover Image">
                <span class="tooltip">
                    <p>Where light gradually diminishes. Many bioluminescent organisms inhabit this mysterious realm.</p>
                </span>
            </div>
            <img id="main-image-2" src="images/02.jpg" alt="Image 02">
            <img id="image-b-2" src="images/02-b.jpg" alt="Image 02-b" style="display:none;">
            <img id="image-c-2" src="images/02-c.jpg" alt="Image 02-c" style="display:none;">
       
            <div class="rectangle-container"> <!-- New container for positioning -->
            </div>       
                 <p class="image-text">
                <span class="zone-name">Mesopelagic Zone</span><br>
                <span class="zone-depth">(Twilight Zone: 200 - 1,000 meters)</span>
            </p>
        </div>
    
        <script>
            const images2 = [
                document.getElementById('main-image-2'),
                document.getElementById('image-b-2'),
                document.getElementById('image-c-2')
            ];
            const imageLabels2 = ["IRIDESCENT ANTARTIC SNAIL", "SOLASTER CARIBBAEUS VERRILL", "HYALOCYLIS STRIATA"];
            let currentIndex2 = 0;
    
            function changeImage2() {
                // Hide the current image
                images2[currentIndex2].style.display = 'none';
    
                // Update index
                currentIndex2 = (currentIndex2 + 1) % images2.length;
    
                // Show the next image
                images2[currentIndex2].style.display = 'block';
                
                // Update the label text
                document.getElementById('label-2').textContent = imageLabels2[currentIndex2];
            }
    
            // Start the image changing every 3 seconds
            setInterval(changeImage2, 4000);
        </script>
    
        <div class="image-wrapper">
            <div class="animated-square" id="animated-square-3"></div>
            <span class="image-label" id="label-3">PRIMNO MACROPA</span>
            <div class="tooltip-container">
                <img src="images/hover.png" class="hover-image" alt="Hover Image">
                <span class="tooltip">
                    <p>Zone of perpetual darkness. Strange and often translucent creatures adapted to extreme pressure live here.</p>
                </span>
            </div>            
            <img id="main-image-3" src="images/03.jpg" alt="Image 03">
            <img id="image-b-3" src="images/03-b.jpg" alt="Image 03-b" style="display:none;">
            <img id="image-c-3" src="images/03-c.jpg" alt="Image 03-c" style="display:none;">
            <p class="image-text">
                <span class="zone-name">Bathypelagic Zone</span><br>
                <span class="zone-depth">(Midnight Zone: 1,000 - 4,000 meters)</span>
            </p>
            <div class="rectangle-container"> <!-- New container for positioning -->
            </div>
        </div>
    
        <script>
            const images3 = [
                document.getElementById('main-image-3'),
                document.getElementById('image-b-3'),
                document.getElementById('image-c-3')
            ];
            const imageLabels3 = ["PRIMNO MACROPA", "EULIMIDAE", "ATOLLA JELLYFISH"];
            let currentIndex3 = 0;
    
            function changeImage3() {
                // Hide the current image
                images3[currentIndex3].style.display = 'none';
    
                // Update index
                currentIndex3 = (currentIndex3 + 1) % images3.length;
    
                // Show the next image
                images3[currentIndex3].style.display = 'block';
                
                // Update the label text
                document.getElementById('label-3').textContent = imageLabels3[currentIndex3];
            }
    
            // Start the image changing every 3 seconds
            setInterval(changeImage3, 4000);
        </script>
    </div>
    

    <div id="rectangle-title">
        <h2>Visualizing Depths Beyond the Bathypelagic Zone</h2>
        <h3>While the Smithsonian Collections Invertebrates have been explored up to depths of 4,000 meters, you can discover more about other fascinating oceanic zones by hovering over them. Rectangle widths reflect the size of each depth interval.</h3>
    </div>
    
    <div id="rectangles-container">
        <div class="rectangle-container" data-tooltip="The epipelagic zone experiences significant temperature variations due to sunlight and heat, ranging from 97°F (36°C) in the Persian Gulf to 28°F (-2°C) near the North Pole.">
            <div class="rectangle" style="width: 23px; background-color: rgba(244, 154, 171, 0.3);"></div>
        </div>
        <div class="rectangle-container" data-tooltip="The mesopelagic zone experiences significant temperature changes due to the thermocline—a layer where water temperature drops rapidly with depth. This transition varies seasonally, being strongest in the tropics and nearly absent in polar winters.">
            <div class="rectangle" style="width: 86px; background: linear-gradient(90deg, rgba(223, 160, 177, 0.70) 0%, rgba(202, 165, 184, 0.70) 100%); opacity: 0.4;"></div>
        </div>
        <div class="rectangle-container" data-tooltip="In the bathypelagic zone, temperatures remain constant at around 39°F (4°C), while pressure exceeds 5,850 pounds per square inch at 4,000 meters. Despite these extreme conditions, sperm whales dive to this depth in search of food.">
            <div class="rectangle" style="width: 320px; background: linear-gradient(90deg, rgba(202, 165, 184, 0.70) 45.5%, rgba(180, 171, 190, 0.70) 100%); opacity: 0.4;"></div>
        </div>
        <div class="rectangle-container" data-tooltip="The Abyssopelagic Zone ranges from 4,000 to 6,000 meters deep. At these crushing depths, water temperatures are near freezing, and only a few resilient creatures inhabit the area.">
            <div class="rectangle" style="width: 213px; background: linear-gradient(90deg, rgba(180, 171, 190, 0.70) 46.51%, rgba(159, 177, 196, 0.70) 99.87%); opacity: 0.4;"></div>
        </div>
        <div class="rectangle-container" data-tooltip="The hadalpelagic zone ranges from 6,000 to 10,994 meters in the Mariana Trench. Temperatures are just above freezing, and pressure exceeds 8 tons per square inch.">
            <div class="rectangle" style="width: 536px; background: linear-gradient(90deg, rgba(159, 177, 196, 0.40) 0%, rgba(76, 85, 94, 0.40) 100%); opacity: 0.7;"></div>
        </div>
    </div>
    

    <div id="legend-container">
        <svg id="legend-svg" viewBox="0 0 1728 500"></svg>
    </div>

    <div id="chart1-container">
        <h2>Overview of Image Count Across Different Depth Intervals</h2>
        <h3>A logarithmic scale was used to account for fewer images as depth increases. Hover to see number of images at each interval.</h3>
        <div id="chart1"></div>
        <script src="script1.js"></script>
    </div>

    <div id="chartTooltip" style="position: absolute; opacity: 0;">
        <div class="chart-tooltip"></div>
    </div>

    <!-- <div id="sticky-image-container">
        <img src="images/epipelagic-modal.png" alt="Epipelagic Zone" id="sticky-image" class="sticky">
    </div>
     -->

<!-- Text that will change on circle click -->
<div id="chart-container" style="display: flex; flex-direction: column; align-items: center;">
    <div id="instruction-text">
        <p><em>Scroll</em> and <em>hover</em> on a circle to see the number of images at each depth interval.</p>
        <p><em>Click</em> on a circle to explore images at each depth interval.</p>
    </div>


    <div id="chart"></div>



    <div id="image-container"></div>
    <div id="depth-images-container" style="display: none;"></div>
</div>



<script src="script.js"></script>


<div id="footer" style="display: flex; flex-direction: column; align-items: center;">
    <div id="footer-text">
        <p>Congratulations! You've reached the deepest section of the <em>Smithsonian Collections Invertebrate Zoology</em> Images.</p>

        <p>Among the depths, the deepest recorded invertebrate species captured by the Smithsonian Collection is the <em>Galatheabdella brunni</em>, a fish leech found at a remarkable depth of <em>3,944 meters</em>.</p>
    </div>

    <button id="back-to-top-button" onclick="scrollToChart()">
        Back to Top
    </button>
    
    <script>
    function scrollToChart() {
        const chart = document.getElementById('chart');
        chart.scrollIntoView({ behavior: 'smooth' });
    }
    </script>
</div>

<script>
// Run animation only on initial page load or refresh
document.addEventListener('DOMContentLoaded', function() {
    // Animate all three squares
    const squares = document.querySelectorAll('.animated-square');
    
    if (squares.length > 0) {
        // Animate each square with a slight delay between them
        squares.forEach((square, index) => {
            // Reset animation state first
            square.style.animation = 'none';
            square.offsetHeight; // Force reflow
            
            // Apply animation with delay
            setTimeout(() => {
                square.style.animation = 'drawSquare 3s ease-in-out forwards';
                console.log(`Animation started for square ${index+1}`);
            }, index * 300); // Delay each square by 300ms
        });
    } else {
        console.log("No squares found");
    }
    
    // Reset session storage for testing
    sessionStorage.removeItem('hasVisited');
});
</script>

</body>
</html>

<!-- <div class="hover-image" data-tooltip="Tooltip text for image 1"></div>
<div class="tooltip"></div>      -->